import { Button, Text } from "@/components/ui";
import { useStore } from "@/store";
import { observer } from "mobx-react-lite"
import { AppStackScreenProps } from "../AppStack";
import { useCallback } from "react";
import { Box, VStack } from "native-base";
import { useSafeAreaInsets } from "react-native-safe-area-context";

interface OnboardingProps extends AppStackScreenProps<"Onboarding"> {}

export const Onboarding = observer(function(props: OnboardingProps) {
  const { navigation } = props;
  const { makeDoneInit } = useStore().setting
  const { init: listInit } = useStore().listItem
  const { init: sectionsInit } = useStore().sections

  const insets = useSafeAreaInsets()

  const handleClickGetStarted = useCallback(() => {
    makeDoneInit()  //  Remove Onboarding Page
    sectionsInit()
    listInit()  //  Load lists
    navigation.navigate("Home", {screen: "Wellcome"})
  }, [])

  return <Box pt={insets.top + 20} px={6}>
    <VStack pt={20} justifyContent="center" h="full" space="xl">
      <Text fontSize="4xl" text="Myan Hallyu" />
      <Button w="full" title="Get started" rounded="xl" onPress={handleClickGetStarted} />
    </VStack>
  </Box>
})
